# ============================= #
#                               #
#        GENERAL OPTIONS        #
#                               #
# ============================= #

[general]

# Option: loglevel
# Required: Yes
# Description: Controls the level (and amount) of 
#   log messages. Valid values are:
#     - STATUS: Only print status messages
#     - INFO: Slightly more verbose that STATUS
#     - DEBUG: Prints information useful for debugging the
#       scheduler.
#     - VDEBUG: Prints very verbose information
#       on the scheduler's internal data structures. Use only
#       for short runs.
loglevel: INFO

# Option: mode
# Required: Yes
# Description: Sets the mode the scheduler will run in.
#   Currently the only valid values are "simulated" and
#   "opennebula". The "simulated" mode expects lease
#   requests to be provided through a trace file, and
#   all enactment is simulated. The "opennebula" mode
#   interacts with the OpenNebula virtual infrastructure
#   manager (http://www.opennebula.org/) to obtain lease
#   requests and to do enactment on physical resources.
#   See sample_opennebula.conf for description of
#   OpenNebula-specific options.
mode: simulated

# Option: lease-preparation
# Required: No (default is "unmanaged")
# Description: Sets how the scheduler will handle the
#   preparation overhead of leases. Valid values are:
#     - unmanaged: The scheduler can assume that there
#         is no deployment overhead, or that some
#         other entity is taking care of it (e.g., one
#         of the enactment backends)
#     - imagetransfer: A disk image has to be transferred
#         from a repository node before the lease can start.
lease-preparation: unmanaged

# Option: datafile
# Required: No
# Description: This is the file where statistics on
# the scheduler's run will be saved to (waiting time of leases,
# utilization data, etc.). If omitted, no data will be saved.
datafile: /var/tmp/haizea/results.dat



# ============================= #
#                               #
#      SIMULATION OPTIONS       #
#                               #
# ============================= #

[simulation]

# Option: clock
# Required: No (default is to not show the message)
# Description: Type of clock to use in simulation:
#     - "simulated": A simulated clock that fastforwards through
#                    time. Can only use the tracefile request
#                    frontend
#     - "real": A real clock is used, but simulated resources and
#               enactment actions are used. Can only use the RPC
#               request frontend.
clock: simulated

# Option: starttime
# Required: Only when using the simulated clock
# Description: Time at which simulated clock will start
starttime: 2006-11-25 13:00:00

# Option: nodes
# Required: Yes
# Description: Number of nodes in the simulated cluster
nodes: 4

# Option: resources
# Required: Yes
# Description: Resources in each node. Five types of resources
#   are recognized right now:
#     - CPU: Number of processors per node
#     - Mem: Memory (in MB)
#     - Net (in): Inbound network bandwidth (in Mbps) 
#     - Net (out): Outbound network bandwidth (in Mbps) 
#     - Disk: Disk space in MB (not counting space for disk cache)
resources: CPU,1;Mem,1024;Net (in),100;Net (out),100;Disk,20000

# Option: imagetransfer-bandwidth
# Required: Yes
# Description: Bandwidth (in Mbps) available for image transfers.
#   This would correspond to the outbound network bandwidth of the
#   node where the images are stored.
imagetransfer-bandwidth: 100

# Option: status-message-interval
# Required: No (default is to not show the message)
# Description: If specified, the simulated clock will print a status
#   message with some basic statistics. This is useful to keep track
#   of long simulations. The interval is specified in minutes.
#status-message-interval: 15


# ============================= #
#                               #
#      SCHEDULING OPTIONS       #
#                               #
# ============================= #

[scheduling]

# Option: wakeup-interval
# Required: No (default is one minute)
# Description: Interval at which Haizea will wake up
#   to manage resources and process pending requests.
#   This option is not used when using a simulated clock,
#   since the clock will skip directly to the time where an
#   event is happening.
#wakeup-interval: 60

# Option: backfilling
# Required: Yes
# Description: Backfilling algorithm to use. Valid values are:
#   - off: don't do backfilling
#   - aggressive: at most 1 reservation in the future
#   - conservative: unlimited reservations in the future
#   - intermediate: N reservations in the future (N is specified
#                   in the backfilling-reservations option)
backfilling: aggressive

# Option: backfilling-reservations
# Required: Only when backfilling == intermediate
# Description: Number of future reservations to allow when
#   using the "intermediate" backfilling option.
# backfilling-reservations: 4

# Option: suspension
# Required: Yes
# Description: Specifies what can be suspended. Valid values are:
#   - none: suspension is never allowed
#   - serial-only: only 1-node leases can be suspended
#   - all: any lease can be suspended
suspension: all

# Option: suspend-rate
# Required: Yes
# Description: Rate at which VMs are assumed to suspend (in MB of
#   memory per second)
suspend-rate: 50

# Option: resume-rate
# Required: Yes
# Description: Rate at which VMs are assumed to resume (in MB of
#   memory per second)
resume-rate: 50

# Option: migration
# Required: Yes
# Description: Specifies whether leases can be migrated from one
#   physical node to another. Valid values are "True" or "False"
migration: True

# Option: what-to-migrate
# Required: Only when migration == True
# Description: Specifies what data has to be moved around when
#   migrating a lease. Valid values are:
#     - nothing: migration can be performed without transferring any
#                files.
#     - mem: only the memory must be transferred
#     - mem+disk: both the memory and the VM disk image must be
#               transferred
what-to-migrate: mem+disk


# ============================= #
#                               #
#      DEPLOYMENT OPTIONS       #
#     (w/ image transfers)      #
#                               #
# ============================= #

[deploy-imagetransfer]

# Option: transfer-mechanism
# Required: Yes
# Description: Specifies how disk images are transferred. Valid values are:
#     - unicast: A disk image can be transferred to just one node at a time
#                (NOTE: Not currently supported)
#     - multicast: A disk image can be multicast to multiple nodes at 
#                  the same time.
transfer-mechanism: multicast

# Option: avoid-redundant-transfers
# Required: Yes
# Description: Specifies whether the scheduler should take steps to
#   detect and avoid redundant transfers (e.g., if two leases are
#   scheduled on the same node, and they both require the same disk
#   image, don't transfer the image twice; allow one to "piggyback"
#   on the other). There is generally no reason to set this option
#   to False.
avoid-redundant-transfers: True

# Option: diskimage-reuse
# Required: Yes
# Description: Specifies whether disk image caches should be created
#   on the nodes, so the scheduler can reduce the number of transfers
#   by reusing images. Valid values are:
#     - none: No image reuse
#     - image-caches: Use image caching algorithm described in Haizea
#                     publications
diskimage-reuse: none

# Option: diskimage-cache-size
# Required: Only if diskimage-reuse = image-caches
# Description: Specifies the size (in MB) of the disk image cache on
#   each physical node.
diskimage-cache-size: 20480



# ============================= #
#                               #
#      TRACEFILE OPTIONS        #
#                               #
# ============================= #

[tracefile]

# Option: tracefile
# Required: Yes
# Description: Path to tracefile to use.
tracefile: /usr/share/haizea/traces/sample.lwf

# Option: imagefile
# Required: No
# Description: Path to list of images to append to lease requests.
#   If omitted, the images in the tracefile are used.
#imagefile: /usr/share/haizea/traces/sample.images

# Option: injectionfile
# Required: No
# Description: Path to file with leases to "inject" into the
#   tracefile.
#injectionfile: /usr/share/haizea/traces/multi/inj1.lwf

# Option: bootshutdown-overhead
# Required: No (default is 0)
# Description: Specifies how many seconds will be alloted to
#   boot and shutdown of the lease.
#bootshutdown-overhead: 20

# Option: runtime-overhead
# Required: No (default is 0)
# Description: Adds a runtime overhead (in %) to the lease duration.
#runtime-overhead: 5
