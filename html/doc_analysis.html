<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<title>Haizea - An Open Source VM-based Lease Manager</title>
<link href="haizea.css" type="text/css" rel="stylesheet"/>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
</head>
<body>

<div id="content">
<div id="logo">
<a href="index.html"><img src="logo.png" width="450" height="86" border="0" alt="Haizea"/></a>
</div>
<div class="topbar">
<a href="whatis.html">What is Haizea?</a>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;
<a href="features.html">Features</a>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;
<a href="download.html">Download</a>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;
<a href="documentation.html" style="color:black">Documentation</a>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;
<a href="support.html">Support</a>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;
<a href="pubs.html">Publications</a>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;
<a href="credits.html">Credits</a></div>
<h1>Analysing data collected during a simulation experiment</h1>

<p>While Haizea is running, it collects data that can be analysed offline (accepted/rejected leases, waiting times, etc.). This data is saved to disk when Haizea stops running so, for now, this information is (in practice) only useful for simulation experiments. In the future, Haizea will save data periodically to disk so it can also be analysed online.</p>

<p>The file where the collected data will be saved is specified in the <tt>datafile</tt> option of the <tt>general</tt> section:</p>
<pre class="shell">
[general]
...

datafile: /var/tmp/haizea.dat

...
</pre>

<p>
Haizea currently includes no tools to easily convert this datafile into an easily readable format (like a graph) although these will eventually be added to Haizea. For now, if you want to access the data collected by Haizea, you will have to do so programatically. The data file contains a <a href="http://docs.python.org/lib/module-pickle.html">pickled</a> <tt>StatsData</tt> object (see module <tt>haizea.resourcemanager.stats</tt>) with all the information collected during a simulation experiment. An example of how this file is unpickled, and some of its information accessed, can be found in function <tt>haizea_convert_data</tt> in module <tt>haizea.cli.commands</tt>.<p>

<p>The <tt>StatsData</tt> object contains the following information:</p>

<ul>
<li><strong>Counter lists</strong>: Haizea keeps tracks of several metrics, such as the number of accepted AR leases or the number of best-effort leases completed, and keeps a log of how these metrics varied over time. In particular, it keeps track of the following:

<ul>
<li><tt>COUNTER_ARACCEPTED</tt>: Number of accepted AR leases.</li>
<li><tt>COUNTER_ARREJECTED</tt>: Number of rejected AR leases.</li>
<li><tt>COUNTER_IMACCEPTED</tt>: Number of accepted immediate leases.</li>
<li><tt>COUNTER_IMREJECTED</tt>: Number of rejected immediate leases.</li>
<li><tt>COUNTER_BESTEFFORTCOMPLETED</tt>: Number of completed best-effort leases.</li>
<li><tt>COUNTER_QUEUESIZE</tt>: Queue size (best-effort leases)</li>
<li><tt>COUNTER_DISKUSAGE</tt>: Total disk space used by VM images in the node pool.</li>
<li><tt>COUNTER_CPUUTILIZATION</tt>: Percentage of CPUs used in node pool.</li>
</ul>
A "counter list" (which should more appropriately be called a "metric log") includes an entry for each time a metric changes. Each entry is a tuple (time, lease_id, value, average). If the metric is not associated with any particular lease, then the lease ID will be <tt>None</tt>. The average is a running average which will be <tt>None</tt> when it does not make sense to keep an average (e.g., the number of accepted AR requests).</li>
<li><strong>Node state log</strong>: A dictionary with one entry per physical node. Each entry has a list with the state of a physical node at certain points in time. The possible states are:
<ul>
<li><tt>DOING_IDLE</tt>: The node is idle.</li>
<li><tt>DOING_VM_RUN</tt>: The node is running a VM.</li>
<li><tt>DOING_VM_SUSPEND</tt>: The node is suspending a VM.</li>
<li><tt>DOING_VM_RESUME</tt>: The node is resuming a VM.</li>
<li><tt>DOING_TRANSFER_NOVM</tt>: The node is idle, and an image transfer is in progress.</li>
</ul>
This information is only useful if you have one VM per physical node. The node state log will be modified in future versions of Haizea to provide more useful utilization data for configurations that have more than one VM per physical node.
</li>
<li><strong>Lease descriptors</strong>: The lease descriptors (i.e., <tt>ARLease</tt>, <tt>BestEffortLease</tt>, or <tt>ImmediateLease</tt> objects) of all the leases that have been scheduled are included in the object. The resource reservations are removed, as it would make the datafile too big. However, this still conserves interesting metrics like starting and ending times, waiting times, etc.</li>
</ul>

<table border="0" align="center">
<tr>
<td>
<div class="back">
<a href="documentation.html">
<img src="logo_small.png" width="32" height="35" border="0" alt="haizea"/><br/>
BACK TO<br/>DOCUMENTATION
</a>
</div>
</td>
<td>&nbsp;&nbsp;</td>
<td>
<div class="back">
<a href="index.html">
<img src="logo_small.png" width="32" height="35" border="0" alt="haizea"/><br/>
BACK TO<br/>HOME PAGE
</a>
</div>
</td>
</tr>
</table>

</div>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-4920033-1");
pageTracker._initData();
pageTracker._trackPageview();
</script>
</body>
</html>
